
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="pygeoapi is an OGC Reference Implementation supporting numerous OGC API specifications. This workshop will cover publishing geospatial data to the Web using pygeoapi in support of the suite of OGC API standards.">
      
      
        <meta name="author" content="The pygeoapi community">
      
      
        <link rel="canonical" href="https://dive.pygeoapi.io/publishing/ogcapi-tiles/">
      
      
        <link rel="prev" href="../ogcapi-maps/">
      
      
        <link rel="next" href="../ogcapi-records/">
      
      
      <link rel="icon" href="../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>Exercise 5 - Tiles of geospatial data via OGC API - Tiles - Diving into pygeoapi</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2a3383ac.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/print-site.css">
    
      <link rel="stylesheet" href="../../css/print-site-material.css">
    
      <link rel="stylesheet" href="../../assets/stylesheets/pygeoapi.css">
    
      <link rel="stylesheet" href="../../assets/stylesheets/termynal.css">
    
      <link rel="stylesheet" href="../../assets/stylesheets/custom.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="pygeoapi" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#exercise-5-tiles-of-geospatial-data-via-ogc-api-tiles" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Diving into pygeoapi" class="md-header__button md-logo" aria-label="Diving into pygeoapi" data-md-component="logo">
      
  <img src="../../assets/images/pygeoapi-icon-notrans.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Diving into pygeoapi
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Exercise 5 - Tiles of geospatial data via OGC API - Tiles
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="./" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../pt/publishing/ogcapi-tiles/" hreflang="pt" class="md-select__link">
              Portuguese
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/geopython/diving-into-pygeoapi" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Diving into pygeoapi" class="md-nav__button md-logo" aria-label="Diving into pygeoapi" data-md-component="logo">
      
  <img src="../../assets/images/pygeoapi-icon-notrans.png" alt="logo">

    </a>
    Diving into pygeoapi
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/geopython/diving-into-pygeoapi" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction to pygeoapi
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Workshop environment setup
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../standards/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Standards
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Publishing
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Publishing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../first/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exercise 1 - Your first dataset
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ogcapi-features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exercise 2 - Vector data via OGC API - Features
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ogcapi-coverages/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exercise 3 - Raster data via OGC API - Coverages
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ogcapi-maps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exercise 4 - Maps of geospatial data via OGC API - Maps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Exercise 5 - Tiles of geospatial data via OGC API - Tiles
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Exercise 5 - Tiles of geospatial data via OGC API - Tiles
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pygeoapi-support" class="md-nav__link">
    <span class="md-ellipsis">
      pygeoapi support
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#publish-pre-rendered-vector-tiles" class="md-nav__link">
    <span class="md-ellipsis">
      Publish pre-rendered vector tiles
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#publish-vector-tiles-from-elasticsearch" class="md-nav__link">
    <span class="md-ellipsis">
      Publish vector tiles from Elasticsearch
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#client-access" class="md-nav__link">
    <span class="md-ellipsis">
      Client access
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Client access">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#qgis" class="md-nav__link">
    <span class="md-ellipsis">
      QGIS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafletjs" class="md-nav__link">
    <span class="md-ellipsis">
      LeafletJS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#openlayers" class="md-nav__link">
    <span class="md-ellipsis">
      OpenLayers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ogcapi-records/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exercise 6 - Metadata via OGC API - Records
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ogcapi-edr/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exercise 7 - Environmental data via OGC API - Environmental Data Retrieval
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ogcapi-processes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exercise 8 - Functions via OGC API - Processes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../advanced/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Advanced topics
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Advanced topics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/i18n/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multilingual support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/crs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CRS support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/ui-custom-templates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UI customization and templating
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/downstream-applications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using pygeoapi in downstream applications
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/seo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Search Engine Optimization (SEO)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/security-access-control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security and access control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/semantic-web-linked-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Semantic Web and Linked Data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/cloud/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cloud deployment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/inspire/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    INSPIRE support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/administration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Administration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/bridges/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exercise 9 - pygeoapi as a bridge to other services
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../conclusion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Conclusion
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pygeoapi-support" class="md-nav__link">
    <span class="md-ellipsis">
      pygeoapi support
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#publish-pre-rendered-vector-tiles" class="md-nav__link">
    <span class="md-ellipsis">
      Publish pre-rendered vector tiles
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#publish-vector-tiles-from-elasticsearch" class="md-nav__link">
    <span class="md-ellipsis">
      Publish vector tiles from Elasticsearch
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#client-access" class="md-nav__link">
    <span class="md-ellipsis">
      Client access
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Client access">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#qgis" class="md-nav__link">
    <span class="md-ellipsis">
      QGIS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafletjs" class="md-nav__link">
    <span class="md-ellipsis">
      LeafletJS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#openlayers" class="md-nav__link">
    <span class="md-ellipsis">
      OpenLayers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="exercise-5-tiles-of-geospatial-data-via-ogc-api-tiles">Exercise 5 - Tiles of geospatial data via OGC API - Tiles</h1>
<p><a href="https://ogcapi.ogc.org/tiles">OGC API - Tiles</a> provides a Web API to deliver tiles of geospatial information. Different forms of geospatial information are supported, such as tiles of vector features ("vector tiles"), coverages, maps (or imagery) and potentially eventually additional types of tiles of geospatial information. The standard is available on this document:</p>
<ul>
<li><a href="https://docs.ogc.org/is/20-057/20-057.html">OGC API - Tiles: Part 1: Core</a></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>OGC API - Tiles extends the <code>collections/*</code> URL structure (tilesets are listed under <code>/collections/example/tiles</code>:</p>
<div class="highlight"><pre><span></span><code>https://demo.pygeoapi.io/collections/lakes/tiles/WebMercatorQuad/{tileMatrix}/{tileRow}/{tileCol}?f=mvt
</code></pre></div>
</div>
<h2 id="pygeoapi-support">pygeoapi support</h2>
<p>pygeoapi supports the core OGC API - Tiles specification, and is able to advertise an existing tileset. Note that pygeoapi itself does not render tiles from source data, but it supports publishing tiles from different <a href="https://docs.pygeoapi.io/en/latest/data-publishing/ogcapi-tiles.html#providers">backend providers</a>. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The OGC API - Tiles URL structure is compatible with XYZ layers in common libraries such as OpenLayers, Leaflet and MapML</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See <a href="https://docs.pygeoapi.io/en/latest/data-publishing/ogcapi-tiles.html">the official documentation</a> for more information on supported tile backends</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>pygeoapi currently supports two well known Tile Matrix Sets: <code>WorldCRS84Quad</code> and <code>WebMercatorQuad</code>. Their definition is published on the <a href="https://demo.pygeoapi.io/master/TileMatrixSets">/TileMatrixSets</a> end point.  </p>
</div>
<h2 id="publish-pre-rendered-vector-tiles">Publish pre-rendered vector tiles</h2>
<p>In this scenario, tiles must be pre-rendered before serving. The <code>MVT-tippecanoe</code> provider enables serving tiles pre-rendered by <a href="https://github.com/mapbox/tippecanoe">tippecanoe</a>, either from a path on disk or from a static server (e.g.: S3 or MinIO bucket).</p>
<p>For this exercise, you will publish a vector dataset of the <a href="https://livingatlas-dcdev.opendata.arcgis.com/datasets/a090c89d52f1498f96a82e97b8bfb83e_0/about">greater Hyderabad municipal corporation ward boundaries</a>, from the location below:</p>
<ul>
<li>data: <code>workshop/exercises/data/hyderabad/greater_hyderabad_municipal_corporation_ward_Boundaries.geojson</code></li>
</ul>
<p>Let's generate the tiles as the first step using tippecanoe:</p>
<div class="admonition example">
<p class="admonition-title">Using tippecanoe to generate vector tiles</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Linux/Mac</label><label for="__tabbed_1_2">Windows (PowerShell)</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><div class="termy">
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>workshop/exercises
docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--rm<span class="w"> </span>-v<span class="w"> </span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/data:/data<span class="w"> </span>emotionalcities/tippecanoe<span class="w"> </span><span class="se">\</span>
tippecanoe<span class="w"> </span>-r1<span class="w"> </span>-pk<span class="w"> </span>-pf<span class="w"> </span>--output-to-directory<span class="o">=</span>/data/tiles/<span class="w"> </span>--force<span class="w"> </span>--maximum-zoom<span class="o">=</span><span class="m">16</span><span class="w"> </span><span class="se">\</span>
--extend-zooms-if-still-dropping<span class="w"> </span>--no-tile-compression<span class="w"> </span>/data/hyderabad/greater_hyderabad_municipal_corporation_ward_Boundaries.geojson
</code></pre></div>
</div></p>
</div>
<div class="tabbed-block">
<p><div class="termy">
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>workshop/exercises
docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--rm<span class="w"> </span>-v<span class="w"> </span><span class="si">${</span><span class="nv">pwd</span><span class="si">}</span>/data:/data<span class="w"> </span>emotionalcities/tippecanoe<span class="w"> </span>tippecanoe<span class="w"> </span>-r1<span class="w"> </span>-pk<span class="w"> </span>-pf<span class="w"> </span>--output-to-directory<span class="o">=</span>/data/tiles/<span class="w"> </span>--force<span class="w"> </span>--maximum-zoom<span class="o">=</span><span class="m">16</span><span class="w"> </span>--extend-zooms-if-still-dropping<span class="w"> </span>--no-tile-compression<span class="w"> </span>/data/hyderabad/greater_hyderabad_municipal_corporation_ward_Boundaries.geojson
</code></pre></div>
</div></p>
</div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please note that the tippecanoe tool requires the input file to be in WGS84, and it always outputs tiles in WebMercator.</p>
</div>
<div class="admonition question">
<p class="admonition-title">Update the pygeoapi configuration</p>
<p>Open the pygeoapi configuration in a text editor. Add a new dataset section as follows:</p>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">    </span><span class="nt">hyderabad</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">collection</span>
<span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Greater Hyderabad Municipal Corporation ward boundaries</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">The city ward boundaries represent the administrative and electoral boundary areas of the city. It plays a great role in planning of the city, for each council of the municipal corporation.</span>
<span class="w">        </span><span class="nt">keywords</span><span class="p">:</span>
<span class="w">           </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Boundaries</span>
<span class="w">           </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Administrative</span>
<span class="w">           </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ward</span>
<span class="w">        </span><span class="nt">links</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">text/html</span>
<span class="w">              </span><span class="nt">rel</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">canonical</span>
<span class="w">              </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">information</span>
<span class="w">              </span><span class="nt">href</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://livingatlas-dcdev.opendata.arcgis.com/datasets/a090c89d52f1498f96a82e97b8bfb83e_0/about</span>
<span class="w">              </span><span class="nt">hreflang</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">en-US</span>
<span class="w">        </span><span class="nt">extents</span><span class="p">:</span>
<span class="w">            </span><span class="nt">spatial</span><span class="p">:</span>
<span class="w">                </span><span class="nt">bbox</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">78.2379194985166180</span><span class="p p-Indicator">,</span><span class="nv">17.2908061510471995</span><span class="p p-Indicator">,</span><span class="nv">78.6217049083810764</span><span class="p p-Indicator">,</span><span class="nv">17.5618443356918768</span><span class="p p-Indicator">]</span>
<span class="w">                </span><span class="nt">crs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://www.opengis.net/def/crs/OGC/1.3/CRS84</span>
<span class="w">            </span><span class="nt">temporal</span><span class="p">:</span>
<span class="w">                </span><span class="nt">begin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2011-11-11</span>
<span class="w">                </span><span class="nt">end</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span><span class="w">  </span><span class="c1"># or empty</span>
<span class="w">        </span><span class="nt">providers</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">feature</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GeoJSON</span>
<span class="w">              </span><span class="nt">data</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/data/hyderabad/greater_hyderabad_municipal_corporation_ward_Boundaries.geojson</span>
<span class="w">              </span><span class="nt">id_field</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">objectid</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tile</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MVT-tippecanoe</span>
<span class="w">              </span><span class="nt">data</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/data/tiles/</span><span class="w">  </span><span class="c1"># local directory tree</span>
<span class="w">              </span><span class="nt">options</span><span class="p">:</span>
<span class="w">                </span><span class="nt">zoom</span><span class="p">:</span>
<span class="w">                    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">                    </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">16</span>
<span class="w">              </span><span class="nt">format</span><span class="p">:</span>
<span class="w">                    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pbf</span>
<span class="w">                    </span><span class="nt">mimetype</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">application/vnd.mapbox-vector-tile</span>
</code></pre></div></td></tr></table></div>
<p>Save the file and restart Docker Compose. Navigate to <a href="http://localhost:5000/collections">http://localhost:5000/collections</a> to evaluate whether the new dataset has been published.</p>
<p>Additional check for the following tile specific endpoints in the <code>hyderabad</code> collection:</p>
<ul>
<li>tile links in <a href="http://localhost:5000/collections/hyderabad/tiles">http://localhost:5000/collections/hyderabad/tiles</a></li>
<li>tile metadata in <a href="http://localhost:5000/collections/hyderabad/tiles/WebMercatorQuad/metadata">http://localhost:5000/collections/hyderabad/tiles/WebMercatorQuad/metadata</a></li>
</ul>
<p><img alt="TileSet" src="../../assets/images/vtiles-hyderabad.png" /></p>
<h2 id="publish-vector-tiles-from-elasticsearch">Publish vector tiles from Elasticsearch</h2>
<p>Elasticsearch provides a middleware that <a href="https://www.elastic.co/blog/introducing-elasticsearch-vector-tile-search-api-for-geospatial">renders an index on the fly, as vector tiles</a>. This middleware is also supported by the pygeoapi mvt backend.</p>
<p>If you want to explore publishing vector tiles using Elasticsearch clone <a href="https://github.com/geopython/pygeoapi-examples/">pygeoapi-examples</a> repository:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Linux/Mac</label><label for="__tabbed_2_2">Windows (PowerShell)</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><div class="termy">
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/geopython/pygeoapi-examples.git
</code></pre></div>
</div></p>
</div>
<div class="tabbed-block">
<p><div class="termy">
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/geopython/pygeoapi-examples.git
</code></pre></div>
</div></p>
</div>
</div>
</div>
<p>Then change into the <code>docker/mvt-elastic</code> folder:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Linux/Mac</label><label for="__tabbed_3_2">Windows (PowerShell)</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><div class="termy">
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>docker/mvt-elastic
</code></pre></div>
</div></p>
</div>
<div class="tabbed-block">
<p><div class="termy">
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>docker/mvt-elastic
</code></pre></div>
</div></p>
</div>
</div>
</div>
<p>Edit the <code>add-data.sh</code> script on the <code>ES</code> folder, adding these two lines before the end:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">curl -o /tmp/hyderabad.geojson https://raw.githubusercontent.com/geopython/diving-into-pygeoapi/refs/heads/main/workshop/exercises/data/hyderabad/greater_hyderabad_municipal_corporation_ward_Boundaries.geojson</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">python3 /load_es_data.py /tmp/hyderabad.geojson objectid</span>
</code></pre></div></td></tr></table></div>
<p>Above we are downloading the <code>greater_hyderabad_municipal_corporation_ward_Boundaries.geojson</code> inside the container, and ingesting it into an Elasticsearch index. After this we need to build the docker image:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Linux/Mac</label><label for="__tabbed_4_2">Windows (PowerShell)</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><div class="termy">
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>compose<span class="w"> </span>build
</code></pre></div>
</div></p>
</div>
<div class="tabbed-block">
<p><div class="termy">
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>compose<span class="w"> </span>build
</code></pre></div>
</div></p>
</div>
</div>
</div>
<p>Edit the <code>docker.config.yml</code> configuration on the <code>pygeoapi</code> folder, adding this code block before the end:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">    </span><span class="nt">hyderabad</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">collection</span>
<span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Greater Hyderabad Municipal Corporation ward boundaries</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">The city ward boundaries represent the administrative and electoral boundary areas of the city. It plays a great role in planning of the city, for each council of the municipal corporation.</span>
<span class="w">        </span><span class="nt">keywords</span><span class="p">:</span>
<span class="w">           </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Boundaries</span>
<span class="w">           </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Administrative</span>
<span class="w">           </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ward</span>
<span class="w">        </span><span class="nt">links</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">text/html</span>
<span class="w">              </span><span class="nt">rel</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">canonical</span>
<span class="w">              </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">information</span>
<span class="w">              </span><span class="nt">href</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://livingatlas-dcdev.opendata.arcgis.com/datasets/a090c89d52f1498f96a82e97b8bfb83e_0/about</span>
<span class="w">              </span><span class="nt">hreflang</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">en-US</span>
<span class="w">        </span><span class="nt">extents</span><span class="p">:</span>
<span class="w">            </span><span class="nt">spatial</span><span class="p">:</span>
<span class="w">                </span><span class="nt">bbox</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">78.2379194985166180</span><span class="p p-Indicator">,</span><span class="nv">17.2908061510471995</span><span class="p p-Indicator">,</span><span class="nv">78.6217049083810764</span><span class="p p-Indicator">,</span><span class="nv">17.5618443356918768</span><span class="p p-Indicator">]</span>
<span class="w">                </span><span class="nt">crs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://www.opengis.net/def/crs/OGC/1.3/CRS84</span>
<span class="w">            </span><span class="nt">temporal</span><span class="p">:</span>
<span class="w">                </span><span class="nt">begin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2011-11-11</span>
<span class="w">                </span><span class="nt">end</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span><span class="w">  </span><span class="c1"># or empty</span>
<span class="w">        </span><span class="nt">providers</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">feature</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Elasticsearch</span>
<span class="w">              </span><span class="c1">#Note elastic_search is the docker container of ES the name is defined in the docker-compose.yml</span>
<span class="w">              </span><span class="nt">data</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://elastic_search:9200/hyderabad</span>
<span class="w">              </span><span class="nt">id_field</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">objectid</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tile</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MVT-elastic</span>
<span class="w">              </span><span class="nt">data</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://elastic_search:9200/hyderabad/_mvt/geometry/{z}/{x}/{y}?grid_precision=0</span>
<span class="w">              </span><span class="c1"># index must have a geo_point</span>
<span class="w">              </span><span class="nt">options</span><span class="p">:</span>
<span class="w">                </span><span class="nt">zoom</span><span class="p">:</span>
<span class="w">                    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">                    </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">29</span>
<span class="w">              </span><span class="nt">format</span><span class="p">:</span>
<span class="w">                    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pbf</span>
<span class="w">                    </span><span class="nt">mimetype</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">application/vnd.mapbox-vector-tile</span>
</code></pre></div></td></tr></table></div>
<p>This configuration enables publishing <code>greater_hyderabad_municipal_corporation_ward_Boundaries.geojson</code> as both, OGC API - Features and OGC API - Tiles.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The elastic Vector tile search API supports zoom levels 0-29</p>
</div>
<p>Finally start the docker composition, which will download and ingest the dataset and publish it in pygeoapi:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Linux/Mac</label><label for="__tabbed_5_2">Windows (PowerShell)</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><div class="termy">
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>compose<span class="w"> </span>up
</code></pre></div>
</div></p>
</div>
<div class="tabbed-block">
<p><div class="termy">
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>compose<span class="w"> </span>up
</code></pre></div>
</div></p>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can check your elastic index at:
<a href="http://localhost:9200/_cat/indices">http://localhost:9200/_cat/indices</a></p>
<p>If you are in production, you may want to close the elastic ports on docker-compose.</p>
</div>
<h2 id="client-access">Client access</h2>
<h3 id="qgis">QGIS</h3>
<p>QGIS supports OGC API Vector Tiles via the <a href="https://docs.qgis.org/3.40/en/docs/user_manual/working_with_vector_tiles/vector_tiles_properties.html">Vector Tiles Layer</a>. Although OGC API - Tiles are not natively supported, you can customize the <code>generic connection</code> in order to access them in QGIS.</p>
<div class="admonition question">
<p class="admonition-title">Access OGC API Vector Tiles from QGIS</p>
<p>Before entering QGIS, access your pygeoapi installation page on the browser and follow these steps.</p>
<ul>
<li>access the collection page of the tiles dataset: <a href="http://localhost:5000/collections/hyderabad">http://localhost:5000/collections/hyderabad</a></li>
<li>navigate to the tiles page by clicking on <code>tiles</code>: <a href="http://localhost:5000/collections/hyderabad/tiles">http://localhost:5000/collections/hyderabad/tiles</a></li>
<li>click in <code>Tiles metadata</code>: <a href="http://localhost:5000/collections/hyderabad/tiles/WebMercatorQuad/metadata">http://localhost:5000/collections/hyderabad/tiles/WebMercatorQuad/metadata</a></li>
<li>note the URL template: <code>http://localhost:5000/collections/hyderabad/tiles/WebMercatorQuad/{tileMatrix}/{tileRow}/{tileCol}?f=mvt</code> and of the values of minZoom and maxZoom</li>
</ul>
<p>Follow these steps to connect to a service and access vector tiles:</p>
<ul>
<li>
<p>locate the vector tiles service on the left hand side browser panel. Note that you can also use the top menu and navigate to <code>Layer &gt; Add Layer &gt; Vector Tile Layer</code></p>
</li>
<li>
<p>right-click to bring up the context menu and choose <code>New Generic connection</code></p>
</li>
<li>fill the required values. For URL, use the URL you noted from the previous step, replacing <code>{tileMatrix}/{tileRow}/{tileCol}</code> with <code>{z}/{y}/{x}</code>.</li>
</ul>
<p><img alt="" src="../../assets/images/qgis-vtiles-hyderabad1.png" width="100%" /></p>
<ul>
<li>press <code>OK</code> to add the service. At this point, if you should see the connection appear it. Click <code>Add</code> to add it to the map</li>
<li>Zoom in to Hyderabad to visualize your dataset</li>
</ul>
<p><img alt="" src="../../assets/images/qgis-vtiles-hyderabad2.png" width="100%" /></p>
<p><img alt="" src="../../assets/images/qgis-vtiles-hyderabad3.png" width="100%" /></p>
</div>
<h3 id="leafletjs">LeafletJS</h3>
<p><a href="https://leafletjs.com">LeafletJS</a> is a popular JavaScript library to add interactive maps to websites. LeafletJS does not support OGC API's explicitly, however can interact with OGC API by using the results of the API directly.</p>
<div class="admonition question">
<p class="admonition-title">Add OGC API - Tiles to a website with LeafletJS</p>
<ul>
<li>copy the HTML below to a file called <code>vector-tiles.html</code>, or locate this file in <code>workshop/exercises/html</code></li>
<li>open the file in a web browser</li>
</ul>
<p>The code uses the LeafletJS library with the <a href="https://github.com/Leaflet/Leaflet.VectorGrid">leaflet.vectorgrid</a> plugin to display the lakes OGC API - Tiles service on top of a base layer.</p>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;&lt;</span><span class="nt">title</span><span class="p">&gt;</span>OGC API - Tiles exercise<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width:100vw;height:100vh;&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://unpkg.com/leaflet@1.0.3/dist/leaflet.css&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://unpkg.com/leaflet@1.3.1/dist/leaflet.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://unpkg.com/leaflet.vectorgrid@1.3.0/dist/Leaflet.VectorGrid.bundled.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span><span class="w">    </span>
<span class="nx">map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">L</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">).</span><span class="nx">setView</span><span class="p">({</span><span class="w"> </span><span class="nx">lat</span><span class="o">:</span><span class="w"> </span><span class="mf">17.425181</span><span class="p">,</span><span class="w"> </span><span class="nx">lng</span><span class="o">:</span><span class="w"> </span><span class="mf">78.5493906</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mf">11</span><span class="p">);</span>
<span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span>
<span class="w">    </span><span class="ow">new</span><span class="w"> </span><span class="nx">L</span><span class="p">.</span><span class="nx">tileLayer</span><span class="p">(</span><span class="s1">&#39;https://server.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">attribution</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Tiles &amp;copy; Esri &amp;mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">minZoom</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">    </span><span class="nx">maxZoom</span><span class="o">:</span><span class="w"> </span><span class="mf">16</span><span class="p">,</span>
<span class="w">    </span><span class="p">}));</span>
<span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">getColor</span><span class="p">(</span><span class="nx">val</span><span class="p">){</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">val</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">40</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="k">return</span><span class="w"> </span><span class="s2">&quot;#f2e6c7&quot;</span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">val</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">80</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="k">return</span><span class="w"> </span><span class="s2">&quot;#8fa37e&quot;</span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">val</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">100</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="k">return</span><span class="w"> </span><span class="s2">&quot;#f0d17d&quot;</span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">val</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">120</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="k">return</span><span class="w">  </span><span class="s2">&quot;#d7ded1&quot;</span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s2">&quot;#c2d0d9&quot;</span><span class="p">;</span>
<span class="w"> </span><span class="p">}</span>
<span class="w"> </span><span class="kd">var</span><span class="w"> </span><span class="nx">vectorTileStyling</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">greater_hyderabad_municipal_corporation_ward_Boundaries</span><span class="o">:</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">properties</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">({</span>
<span class="w">            </span><span class="nx">fill</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">            </span><span class="nx">fillColor</span><span class="o">:</span><span class="w"> </span><span class="nx">getColor</span><span class="p">(</span><span class="nx">properties</span><span class="p">.</span><span class="nx">objectid</span><span class="p">),</span>
<span class="w">            </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;#ffffff&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">fillOpacity</span><span class="o">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span>
<span class="w">            </span><span class="nx">weight</span><span class="o">:</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span>
<span class="w">            </span><span class="c1">//color: &quot;#ffffff&quot;,</span>
<span class="w">            </span><span class="nx">opacity</span><span class="o">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span><span class="w"> </span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">mapVectorTileOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">rendererFactory</span><span class="o">:</span><span class="w"> </span><span class="nx">L</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">tile</span><span class="p">,</span>
<span class="w">        </span><span class="nx">interactive</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="nx">vectorTileLayerStyles</span><span class="o">:</span><span class="w"> </span><span class="nx">vectorTileStyling</span><span class="p">,</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">pbfURL</span><span class="o">=</span><span class="s1">&#39;http://localhost:5000/collections/hyderabad/tiles/WorldCRS84Quad/{z}/{y}/{x}?f=mvt&#39;</span><span class="p">;</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">pbfLayer</span><span class="o">=</span><span class="nx">L</span><span class="p">.</span><span class="nx">vectorGrid</span><span class="p">.</span><span class="nx">protobuf</span><span class="p">(</span><span class="nx">pbfURL</span><span class="p">,</span><span class="nx">mapVectorTileOptions</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">layer</span><span class="p">);</span>
<span class="w">    </span><span class="nx">L</span><span class="p">.</span><span class="nx">DomEvent</span><span class="p">.</span><span class="nx">stop</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
<span class="w">    </span><span class="p">}).</span><span class="nx">addTo</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span><span class="w"> </span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<p>In this example, the colors of the symbols reflect the value of the <code>objectid</code> attribute.</p>
<p><img alt="" src="../../assets/images/leaflet-hyderabad.png" width="100%" /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can check the layer attributes, by opening the console in the developer tools.
<img alt="" src="../../assets/images/vtiles-attributes.png" width="100%" /></p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Try adding a <a href="https://demo.pygeoapi.io/master/collections/lakes/tiles/WorldCRS84Quad/metadata">different pygeoapi vector tiles layer</a> by updating the code in <code>workshop/exercises/html/vector-tiles.html</code>.</p>
<p>If you want to render the tiles from the <a href="#publish-vector-tiles-from-elasticsearch">Elasticsearch example</a>, you can check out the code from <a href="https://github.com/doublebyte1/vtiles-example/blob/ogcapi-ws/demo-oat.htm">this</a> repository:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">Linux/Mac</label><label for="__tabbed_6_2">Windows (PowerShell)</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><div class="termy">
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>-b<span class="w"> </span>ogcapi-ws<span class="w"> </span>https://github.com/emotional-cities/vtiles-example.git
</code></pre></div>
</div></p>
</div>
<div class="tabbed-block">
<p><div class="termy">
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>-b<span class="w"> </span>ogcapi-ws<span class="w"> </span>https://github.com/emotional-cities/vtiles-example.git
</code></pre></div>
</div></p>
</div>
</div>
</div>
<p><img alt="" src="../../assets/images/leaflet-hyderabad2.png" width="100%" /></p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>See the <a href="https://leafletjs.com/reference.html">official LeafletJS documentation</a></p>
</div>
<h3 id="openlayers">OpenLayers</h3>
<p><a href="https://openlayers.org">OpenLayers</a> is a popular JavaScript library to add interactive maps to websites. OpenLayers natively supports OGC API - Tiles (map and vector). You can check the code for the example bellow on: <a href="https://ogcincubator.github.io/ogcapi-tiles-demo/">https://ogcincubator.github.io/ogcapi-tiles-demo/</a></p>
<p><iframe
  src="https://ogcincubator.github.io/ogcapi-tiles-demo/"
  style="width:100%; height:800px;"
></iframe>
</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>See the <a href="https://openlayers.org/en/latest/examples/ogc-vector-tiles.html">official OpenLayers documentation</a></p>
</div>
<h1 id="summary">Summary</h1>
<p>Congratulations! You are now able to publish tiles to pygeoapi. You can learn more about this standard on: <a href="https://tiles.developer.ogc.org/">https://tiles.developer.ogc.org/</a></p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2025 pygeoapi community
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
        <script src="../../assets/javascripts/termynal.js"></script>
      
        <script src="../../assets/javascripts/custom.js"></script>
      
    
  </body>
</html>